%=========================================================================
% (c) Michal Bidlo, Bohuslav Køena, 2008

\chapter{Úvod}

%\section{Musíme mít co øíci}
Dnes mezi velmi se roz¹iøující technologie na poli sí»o
%\section{Musíme vìdìt, komu to chceme øíci}

%\section{Musíme si dokonale promyslet obsah}

%\section{Musíme psát strukturovanì} 
V souèasné dobì se v marketingovém odvìtví hledají jiné formy pro prezentaci zbo¾í a slu¾eb, jeliko¾ zákazníci pøehlí¾í klasické formy marketingu i marketingové komunikace. Proto se hledají a vyvíjí nové marketingové trendy, které zákazníky zaujmou, a v mnoha pøípadech se jedná o takové formy, které mohou zvý¹it úèinnost propagace za ni¾¹í náklady.
Cílem bakaláøské práce je zji¹tìní míry vyu¾ívání nových trendù v marketingu v Obchodní pasá¾i Rozkvìt. Tato práce zodpoví otázku, zda Rozkvìt vyu¾ívá nové trendy v marketingu, v jaké míøe a jakým konkrétním zpùsobem.
\chapter{XMPP}

Pro usnadnìní pochopení budou v následující kapitole rozebrány základní stavební kameny protokolu Extensible Messaging and Presence Protocol (XMPP). Konkrétnì jsou zde popsány stávající vlastnosti implementace [odkud se èerpalo], architektura protokolu XMPP obecnì \cite{Rfc3920, Rfc3921} a dal¹í detaily protokolu \cite{Adams, Saint, Moore}, které se vztahují k po¾adavkùm na data mining popisovaný v této práci \cite{Xep0163,Xep0060}. Dal¹í informace byly èerpány z \cite{UNIX,Kurose,Fred,Kosek,Xml5th}.

Samotný protokol je datován do roku 2004 (bøezen), kdy na nìj byl pøejmenován Jabber. Pùvodní projekt Jabber byl vytvoøen roku 1998 autorem Jeremie Miller, je¾ ho zalo¾il na popud nesvobodných uzavøených IM slu¾eb. Mìl mít tøi základní vlastnosti -jednoduchost a srozumitelnost pro implementaci, jednodu¹e roz¹iøitelný a otevøený. Základní vlastnosti a výhody klientù a serverù budou popsány ní¾e. Roku 1999, 4.ledna byl vytvoøen první server se jménem Jabber. Komunita vývojáøù se chopila iniciativy a napsala klienty pro rùzné platformy (Linux, Macintosh, Windows), kteøí dokázali se serverem komunikovat. Roku 2004 byl pøidán mezi RFC (request of comments - ¾ádost o komentáøe) dokumenty. Základní normy jsou RFC 3920 (obecná specifikace protokolu) a RFC 3921 (samotný instant messaging a zobrazení stavu). Dal¹í zdokumentovaná roz¹íøení jsou vydávána v podobì tzv. XEP (XMPP Extension Protocol) dokumentù, star¹ím jménem JEP (Jabber Enhancement Proposal). Dne¹ní poèet tìchto norem se blí¾í k èíslu 300. Ka¾dý XEP obsahuje status, stav vývoje (schválení), ve kterém se zrovna nachází. Jako bezpeènostní prvky jsou zde podporovány SASL, TLS a GPG. XMPP protokol je postaven na obecném znaèkovacím jazyce XML, proto vlastnosti popsané v kapitole \ref{Xml} na stranì \pageref{Xml} platí i pro tento protokol.
%\begin{enumerate}
%\item ==znaková sada
%\end{enumerate}


\section{Architektura}
Dobøe navr¾ená architektura tvoøí základ pro správnì fungující internetovou technologii. XMPP protokol vyu¾ívá decentralizované klient-server slo¾ení. Tato struktura se nejvíce podobá struktuøe posílání e-mailù. V tomto pøípadì je decentralizace sítì chápána jako inteligentní nezávislost mezi vývojáøi klientù a serverù. Ka¾dý z nich se mù¾e zamìøit na dùle¾ité èásti svého vývoje. Server na spolehlivost a roz¹iøitelnost, klient na u¾ivatele. Ka¾dý server pracuje samostatnì, chod ani výpadek jiné datové stanice ¾ádným zpùsobem neovlivní jeho bìh, pouze bude nedostupný seznam kontaktù a slu¾by, kterými server disponuje. 

V tabulce è.\ref{tab2} jsou shrnuty rozdíly v architektuøe Jabber, WWW a e-mail\footnote{internetový systém elektronické po¹ty}. S ka¾dou 
zde jmenovanou slu¾bou má Jabber nìco spoleèného. Co se týèe charakteristiky se vydal støední cestou. Na rozdíl od e-mailu, nepou¾ívá vícenásobný hops a v porovnáním
s WWW vyu¾ívá mezi-doménové pøipojení.

\begin{table}[ht]
\begin{center}
\begin{tabular}{ l  c  c  c } 
\rowcolor[gray]{0.9}\textbf{Charakteristika} & \textbf{WWW}  & \textbf{Email} & \textbf{Jabber}\\
mezi-doménové pøipojení & Ne            & Ano            & Ano\\
vícenásobný hops       & N/A           & Ano            & Ne \\ \hline
\end{tabular}
\caption{Srovnání slu¾eb WWW, Email a Jabber}
\label{tab2}
\end{center} 
\end{table}

Tyto vlastnosti jsou zárukou pro bezpeèný pøenos zpráv, znemo¾òují "kráde¾e" JID\footnote{u¾ivatelské jméno}, který je popsán v podkapitole Jabber ID \ref{jid}, a spamování. 
Obrázek \ref{pic2} zobrazuje pøenos zprávy mezi klientem \textit{A} jeho¾ úèet vlastní \textit{server1} a klientem \textit{B} s úètem na \textit{serveru2}.

\begin{figure}[hb]
\begin{center}
\input{message}
\caption{Pøenos zprávy}
 \label{pic2}
\end{center}
\end{figure}

\subsection*{Klient}
Klient je pøedev¹ím plnì ovládatelný grafický program podporující jednoduché odesíláni zpráv, ale v této práci jej zastupuje bot s konzolovým rozhraním. XMPP svou 
architekturou vnucuje, aby byl co nejjednodu¹¹í. Vlastnosti, které by mìl mít jsou shrnuty do tøí bodù:
\begin{enumerate}
 \item komunikace se serverem pomocí TCP soketu
 \item rozparsování a následná interpretace pøíchozí XML zprávy \uv{stanza}(kapitola \ref{Stanza})
 \item porozumìní sadì zpráv z Jabber jádra
\end{enumerate}

%V následující tabulce jsou zobrazeni nejpou¾ívanìj¹í Jabber klienti a jejich funkènost na operaèním systému.

% \begin{table}[h]
% \begin{center}
% \begin{tabular}{ l  c  c  c c } 
% \rowcolor[gray]{0.9}\textbf{Klient} & \textbf{Windows}  & \textbf{Linux} & \textbf{Mac OS} & \textbf{mobilní zaøízení}\\
% Pidgin				    & Ano               & Ano            & Ano             & Ne \\
% Empathy	 & Telephaty\footnote{podpùrná vrstva Empathy}  & Ano            & Ne              & Ne \\
% Gajim				    & Ano               & Ano            & Ne              & Ne \\
% Jabbim				    & Ano               & Ano            & Ne              & Ne \\
% Meebo\footnote{webový klient}	    & Ano               & Ano            & Ano             & Ano \\
% Miranda				    & Ano               & Ano            & Ne              & Ne \\
% Psi				    & Ano               & Ano            & Ano             & Ne \\
% QIP				    & Ano               & Ne             & Ne              & Ano \\
% Trilian				    & Ano               & Ne             & Ne              & Ne \\
% kopete				    & Ne                & Ano            & Ne              & Ne \\ \hline
% 
% \end{tabular}
% \caption{Jabber klienti v závislosti na operaèním sytému}
% \label{tab3}
% \end{center} 
% \end{table}

\subsection*{Server}
Hlavní vlastnost ji¾ není jako u klienta jednoduchost, ale stabilita a bezpeènost. Standardnì bì¾í na TCP portu 5222. Komunikace mezi servery je 
realizována pøes port 5269. Ka¾dý server uchovává seznam zaregistrovaných u¾ivatelù, kteøí se do sítì mohou pøipojovat pouze pøes nìj. Tento seznam 
nemá ¾ádný jiný server. To zaji¹»uje nemo¾nost \uv{kráde¾e} úètu. Proto¾e XMPP komunikace probíhá pøes sí», musí mít ka¾dá entita adresu, tady nazvána 
JabberID. XMPP spoléhá na DNS tudí¾ pou¾ívá jména na rozdíl od IP protokolu.

Obrázek \ref{pic4} znázoròující distribuovanou architekturu Jabberu byl pøevzat z \cite{Moore}.
\begin{figure}[h]
\begin{center}
\input{struktura}
\caption{Distribuovaná architektura Jabberu}
 \label{pic4}
\end{center}
\end{figure}

%\subsubsection*{ejabberd}
%written in Erlang/OTP GPLv2 (Free and Open Source) ejabberd 2.1.6 - Tue, 2010-12-14 11:56 Linux 32/64bit windoes, mac os, source http://www.ejabberd.im/ - http://www.process-one.net/en/ejabberd/ vyvijen
%\subsubsection*{Openfire}
%java,  Open Source GPL,Aug 26, 2010 2:05:39 PM - Openfire 3.7.0 beta has been released, Openfire 3.6.4 Latest release: May 1, 2009, Windows, Linux,Unix, Mac OS X, http://www.igniterealtime.org/projects/openfire/index.jsp, vyvijen - predtim Wildfire
%\subsubsection*{jabberd2}
%C, General Public License (GPL), jabberd-2.2.11 - 2010-08-08, Runs on Linux, *BSD, Solaris and Windows 32, http://codex.xiaoka.com/wiki/jabberd2:start, vyvijen
%\subsubsection*{jabberd14}
%c, c++,  GPL, 22-Jul-2007 00:44 	815K	Server version 1.6.1.1, AIX FreeBSD HP-UX IRIX Linux Mac OS XNetBSD OpenBSD, Solaris 2.6, 7, 8, http://jabberd.org/, asi stop
%\subsubsection*{Prosody}
%lua, MIT/X11 license, version 0.7.0 14.06.2010, Debian/Ubuntu,MS Windows,Mac OSX,Arch Linux,Source, http://prosody.im/,vyvijen
%\subsubsection*{Tigase}
%java;GNU General Public License - GNU Project - Free Software,2010-06-30 21:00 tigase-server-5.0.0-b2135.zip, linux, windows, mac os - 1024 means open files per process, http://www.tigase.org/vyvijen


V tabulce \ref{tab4} jsou shrnuty informace o serverech Jabberu. První sloupec tvoøí jméno, následuje programovací jazyk v nìm¾ je napsán. Vìt¹ina je vydávána pod licencí GPL\footnote{General Public License-v¹eobecná veøejná licence GNU}, kromì ejabbred a Prosody. Ejabbred pou¾ívá GPLv2, co¾ je GPL licence druhé verze a Prosody licenci MIT/X11. U v¹ech software byla zkoumána nejaktuálnìj¹í verze. Její èíslo naleznete ve tøetím sloupci. V¹echny servery lze provozovat na operaèním systému Linux a Windows. Na platformì Mac OS mohou být pou¾ity v¹echny zde jmenované vyjma jabberd2. Pìt z ¹esti zde pøedstavených software pro server Jabber jsou ve stále vyvíjeny, tedy kromì jabberd14. Tabulka takté¾ shrnuje dùle¾ité vlastnosti serverù v oblasti podpory roz¹íøených statusù o standardy XEP-0060 a XEP-0163 viz podkapitola \ref{Rozsireni}.



\begin{table}[h]
\begin{center}
\begin{tabular}{ l  p{1cm}  c  c  p{2cm} p{3cm} c } 
\rowcolor[gray]{0.9}
\textbf{Server} & \textbf{Jazyk}  & \textbf{Verze} & \textbf{XEP-0060} 				& \textbf{XEP-0163}\\
ejabberd	& Erlang/ Top     & 2.1.6          & ANO					& ANO\\
Openfire	& java            & 3.6.4          & ANO					& ANO\\
jabbred2    	& c               & 2.2.11         & NE						& NE\\
jabbred14	& c, c++          & 1.6.1.1        & ANO\footnote{by add on Idavoll(Python)}	& NE\\
Prosody	    	& lua             & 0.7.0          & NE \footnote{oèekává se a¾ od verze 0.9}	& ANO\\
Tigase		& java            & 5.0.0          & ANO					& ANO\\ \hline
\end{tabular}
\caption{Pøehled Jabber serverù}
\label{tab4}
\end{center} 
\end{table}
% \textbf{Server} & \textbf{Jazyk}  & \textbf{Licence} & \textbf{Verze} & \textbf{Platforma}       & \textbf{Domovská stránka}             & \textbf{stav}\\
% ejabberd	& Erlang/ Top     & GPLv2            & 2.1.6          & L,W,M,S                  & ejabberd.im                           & v\\
% Openfire	& java            & GPL              & 3.6.4          & L,W,M,U                  & igniterealtime.org/ projects/openfire & v\\
% jabbred2    	& c               & GPL              & 2.2.11         & L,W,B,So                 & codex.xiaoka.com/ wiki/jabberd2:start & v\\
% jabbred14	& c, c++          & GPL              & 1.6.1.1        & AIX,B,HP-UX,IRIX, L,M,So & jabberd.org                           & s \\
% Prosody	    	& lua             & MIT/X11          & 0.7.0          & L,W,M,So                 & prosody.im                            & v\\
% Tigase		& java            & GPL              & 5.0.0          & L,W,M                    & tigase.org                            & v \\ \hline


\section{XML}\label{Xml}
Jazyk XML (eXtensible Markup Language), metajazyk pro deklaraci strukturovaných dat, je jádrem protokolu XMPP. Samotný jazyk vznikl roz¹íøením metajazyka SGML, je¾ slou¾í pro deklaraci rùzných typù dokumentù. Základní vlastností je jednoduchá definice vlastních znaèek (tagù). Dokument XML se skládá z elementù, je¾ mù¾eme navzájem zanoøovat. Vyznaèujeme je pomocí znaèek - poèáteèní a ukonèovací. Pomocí tohoto jazyka je tvoøena stanza popsaná v kapitole \ref{Stanza}.

Základní struktura dokumentu psaného jazykem XML je ukázána na obrázku \ref{picXML}. Ka¾dý dokument zaèíná XML deklarací a informací o kódovaní, ve kterém je dokument psán (1.øádek obrázku). Následuje koøenový element, je¾ je uzavøen na samotném konci dokumentu. 4. øádek ukazuje mo¾nost pou¾ití prázdného elementu, který obsahuje jeden atribut s názvem zkratky fakulty.
%\begin{enumerate}
% \item obrazek struktura XML stream...
%\end{enumerate}
\begin{figure}[h]
\begin{verbatim}
1. <?xml version="1.0" encoding="utf-8"?>           // XML deklarace, kódování
2. <fakulta>                                        // koøenový element
3.  <název>Fakulta informaèních technologií</název> // obsah elementu název
4.  <zkratka fakulty="FIT"/>                        // prázdný element
5.  <typy studia>                                   // poèáteèní tag
6.   <bakaláøské titul="Bc."></bakaláøské>          // název a hodnota atributu
7.   <magisterské></magisterské>
8.   <doktorské></doktorské>
9.  </typy studia>                                  // ukonèovací tag
10.</fakulta>
\end{verbatim}  
\caption{Pøíklad základního XML dokumentu.}
 \label{picXML}
\end{figure} 

\section{Stanza}\label{Stanza}
Základní jednotkou pro komunikaci zalo¾enou na XML je stanza. Skládá se ze tøí elementù \textit{message}, \textit{presence} a \textit{iq}, je¾ ka¾dý má svùj jednoznaèný význam.


\subsection*{Message}
XML element prvního zanoøení slou¾ící k posílání zpráv v¹eho druhu. Je to základní metoda pro rychlý pøenos informací z místa na místo. Zprávy jsou typu \uv{push}, tedy jsou odeslány a neoèekává se ¾ádná aktivita od pøíjemce, která by pøijetí potvrdila. Zprávy jsou pou¾ívány pro IM, skupinový chat a pro oznámení nebo upozornìní. Pod elementy a atributy tvoøící nutné minimum zprávy jsou \textit{to} (pøíjemce zprávy), \textit{from} (odesílatel zprávy) a \textit{body} (obsah zprávy). Základní pou¾ívané typy zpráv jsou \textit{normální} (zpráva bez kontextu, vy¾aduje odpovìï ), \textit{chat} (komunikace mezi dvìma entitami), \textit {groupchat}(skupinový chat) \textit{headline} (upozornìní) \textit{error} (chybová zpráva). Celá struktura elementu \textit{\textless message/\textgreater} je zobrazena v pøíloze \ref{Emessage} strana \pageref{Emessage}.

Základní pou¾ití elementu \textit{\textless message/\textgreater} je ukázáno na obrázku \ref{picMessage}. Zobrazuje strukturu zprávy. Na prvním øádku je element \textit{to} -- pøíjemce zprávy, druhý \textit{from} -- odesílatel, následuje \textit{type} -- typ zprávy a nakonec samotný obsah.


\begin{figure}[h]
\begin{verbatim}
       1.         <message from="uzivatel@jabbim.com"
       2.                  to="jabinfo@jabbim.com/bot"
       3.                  type="chat"
       4.            <body> Kolik je hodin? </body>
       5.         </message>
\end{verbatim}  
\caption{Pøíklad pou¾ití elementu \textit{\textless message/\textgreater}.}
 \label{picMessage}
\end{figure} 

\subsection*{IQ}
IQ nebo--li \textit{Info/Query} poskytuje strukturu pro \textit{request--response} (¾ádost--odpovìï ) vazbu a wokrflows, podobný metodám GET, POST a PUT z protokolu HTTP. Na rozdíl od \textit{message} je \textit{iq} spolehlivìj¹í pøenos optimalizovaný pro výmìnu dat (binární data). Pøíjemce musí na ka¾dou pøijatou zprávu odpovìdìt, neboli potvrdit pøijetí. ®ádosti na proces nebo akci jsou posílány jednotlivì \cite{XXX}. Celá struktura elementu \textit{\textless iq/\textgreater} je zobrazena v pøíloze \ref{Eiq} strana \pageref{Eiq}.

Obrázek \ref{picIq} znázoròuje základní pou¾ití elementu \textit{\textless iq/\textgreater}. U¾ivatel \textit{uzivatel} posílá dotaz na získání kontakt listu (øádek 5.).
\begin{figure}[h]
\begin{verbatim}
       1.         <iq from="uzivatel@jabbim.com/doma"
       2.             to="uzivatel@jabbim.com"
       3.             id="uhhfw23648"
       4.             type="get"
       5.            <query xmlns="jabber:iq:roster"/>
       6.         </iq>
\end{verbatim}  
\caption{Pøíklad pou¾ití elementu \textit{\textless iq/\textgreater}.}
 \label{picIq}
\end{figure}


\subsection*{Presence}
Presence nebo--li informace o stavu (pøítomnost) rozesílá dostupnost ostatních entit v síti. Struktura elementu \textit{\textless presence/\textgreater} je zobrazena v pøíloze \ref{Epresence} strana \pageref{Epresence}.

Základní pou¾ití \textit{\textless presence/\textgreater} je zobrazeno na obrázku \ref{picPresence}. Kontakt \textit{jabinfo@jabbim.com/bot} (1.øádek) posílá informace o svém stavu (øádek è.2) a svùj status (è.3).
\begin{figure}[h]
\begin{verbatim}
       1.         <presence from="jabinfo@jabbim.com/bot"
       2.            <show> online </show>
       3.            <status> Jsme zde. </status>
       4.         </presence>
\end{verbatim}  
\caption{Pøíklad pou¾ití elementu \textit{\textless presence/\textgreater}.}
 \label{picPresence}
\end{figure}

\subsubsection*{Jabber ID}\label{jid}
Jabber ID (JID) je jednoznaèný virtuální identifikátor u¾ivatele na síti. Není case-sensitive a je slo¾en ze dvou èástí. 
Takzvané \textit{Jabber bare} neboli èisté ID a \textit{resource}. První je èást na první pohled pøipomíná e-mailovou adresu \textit{user@server}.
Druhá èást slou¾í k pøesné identifikaci jednotlivých spojení. Je pou¾it ke smìrování trafiku s u¾ivateli v pøípadì otevøení vícero spojení pod jedním u¾ivatelem. Spoleènì Jabber bare a resource tvoøí tzv. \textit{full JID} --- \textit{user@server/resource} napøíklad:
\begin{figure}[h]
\begin{verbatim}
                             jabInfo@jabbim.cz/bot
\end{verbatim}
\end{figure}

\section{Roz¹íøení}\label{Rozsireni}
XMPP protokol je mo¾né roz¹íøit o dal¹í vlastnosti. Pro jejich popis slou¾í XEP. Pro tuto práci jsou nepostradatelné \uv{statusy}, které popisují standardy XEP--0060 a XEP--0163 zkrácenì PEP \footnote{Personal Eventing via Pubsub}. Obì tato roz¹íøení umo¾òují strukturovanì pracovat, pou¾ívat a pøená¹et dal¹í XEP protokoly. Jako pøíklad jsou zde uvedeny protokoly XEP--0080 (User Location -- co právì u¾ivatel dìlá) \cite{Xep0080}, XEP--0118 (User Tune -- co u¾ivatel poslouchá za muziku) \cite{Xep0118} a dal¹í, které jsou zmínìny v implementaèní èásti[...]. Jsou to tedy protokoly zalo¾ené na PEP, které vy¾adují podporu nejen v klientech, ale i na stranì serveru (zobrazuje tabulka \ref{tab4}). S touto informací úzce souvisí dal¹í protokol XEP--0115 \cite{Xep0115}, který umo¾òuje zjistit co jaký klient podporuje pøípadnì, které informace je ochoten pøijímat viz. \ref{XEP-0115}.

Jistì, ¾e by se toto v¹echno mohlo být pøidáno pøímo do statusu viz.\ref{picPresence}, av¹ak ten je urèen k informování o pøítomnosti na IM síti. Hlavní rozdíl mezi PEP a obyèejným posílání stavu pomocí presence je v pravomoci klienta pøijmout nebo odmítnou informaci, na rozdíl od presence, je¾ je pøijata v¾dy.

Základ pøenosu informací zaèíná na stranì klienta, je¾ chce v¹echny ve svém roster (kontakt) listu informovat. Za¹le zprávu \textit{\textless iq\textgreater} serveru. Pøíklad této zprávy je ukázán na obrázku \ref{picPep}, který znázoròuje zaslání informaci o písnièce, kterou zrovna poslouchám. Vyu¾ívá k tomu roz¹íøení User Tune, definovaném na øádku èíslo 5. Základ zprávy oznamující zaèátek vysílání informací o roz¹íøených statusech je v¾dy stejný. Li¹í se pouze øádkem 3. a obsahem elementu item v obrázku \ref{picPep}.

\begin{figure}[h]
\begin{verbatim}
  1.  <iq from='uzivatel@jabbim.com' type='set' id='pub1'>
  2.     <pubsub xmlns='http://jabber.org/protocol/pubsub'>
  3.        <publish node='http://jabber.org/protocol/tune'>
  4.           <item>
  5.              <tune xmlns='http://jabber.org/protocol/tune'>
  6.                 <artist>Daniel Landa</artist>
  7.                 <length>255</length>
  8.                 <source>Nigredo</source>
  9.                 <title>1968</title>
  10                 <track>5</track>
  11              </tune>
  12           </item>
  13        </publish>
  14     </pubsub>
  15  </iq>
\end{verbatim}  
\caption{Pøíklad zaèátku vysílání roz¹íøeného statusu.}
 \label{picPep}
\end{figure}



V pøípadì úspì¹né pøijetí \textit{\textless iq\textgreater} zprávy serverem, ka¾dý, kdo se zajímá o va¹e roz¹íøené statusy, obdr¾í oznámení ve formì \textit{\textless message\textgreater}. Èást zprávy je vyobrazená na obrázku \ref{picPep1}. Oznámení také obdr¾í v¹echny va¹e resources. Celá zpráva i v¹echny dal¹í nále¾itosti jsou uvedeny v pøíloze........

\begin{figure}[h]
\begin{verbatim}
  1.  <message from='uzivatel@jabbim.com' type='set'
  2.           to='jabinfo@jabbim.com/bot' id='pub1'>
  3.     <event xmlns='http://jabber.org/protocol/pubsub#event'>
  4.        <items node='http://jabber.org/protocol/tune'>
  5.           <item>
  6.              <tune xmlns='http://jabber.org/protocol/tune'>
  7.                 <artist>Daniel Landa</artist>
  8.                 <length>255</length>
  9.                 ...
\end{verbatim}  
\caption{Pøíklad 2. Zúèastnìné strany obdr¾í upozornìní na události.}
 \label{picPep1}
\end{figure}

\subsubsection*{XEP-0115: Schopnosti subjektu}\label{XEP-0115}
Pomocí protokolu Entity Capabilities je mo¾né zjistit vlastnosti klienta. Tato informace výraznì sni¾uje poèet a velikost komunikace a pøenos zpráv mezi u¾ivateli. Dotazu zobrazený na obrázku \ref{picCap} je zji¹tìna schopnost jednotlivých klientù a server tak následnì ví, kam jednotlivì roz¹íøené statusy zasílat. V¹echny zde zmiòované roz¹íøení a protokoly z kapitoly [...] je mo¾né u ka¾dého klienta vyèíst z atributu \textit{ver} (druhá èást u atributu node), který je vypoèítán ze v¹ech podporovaných protokolù klienta, viz. \cite{Xep0115}.

\begin{figure}[h]
\begin{verbatim}
1. <iq from='uzivatel@jabbim.com' id='disco1'
2.     to='jabinfo@jabbim.com/bot' type='get'>
3.    <query xmlns='http://jabber.org/protocol/disco#info'
4.       node='http://code.google.com/p/exodus#QgayPKawpkPSDYmwT/WM94uAlu0='/>
5. </iq>
\end{verbatim}
\caption{Dotaz na podporované protokoly.}
 \label{picCap}
\end{figure}

\section{Knihovny}
Jabber je realizován jako otevøený XML standart pro instant messaging formát, proto existuje mnoho programovacích jazykù. Vìt¹ina z nich 
disponuje nìkolika knihovnami, usnadòující práci s protokolem XMPP. V tabulce \ref{tab5} jsou pro nejznámìj¹í programovací jazyky zobrazeny dostupné knihovny.
\begin{table}[ht]
\begin{center}
\begin{tabular}{ l  l} 
\rowcolor[gray]{0.9}
\textbf{Programovací jazyk} 	& \textbf{knihovna} \\
C				& iksemel, libstrophe, Loudmoutn  \\
C++				& gloox, Iris\\
JAVA    			& JabberBeans, Smack, JSO, Feridian, Emite, minijingle\\
.NET				& Jabber-Net, agsXMPP SDK\\
Python			    	& JabberPy, PyXMPP, SleekXMPP, Twisted Words\\
Perl			    	& Net-Jabber\\
Ruby				& XMPP4R, Jabber4R, Jabber::Simple, Jabber::Bot         \\ \hline
\end{tabular}
\caption{Pøehled Jabber knihoven}
\label{tab5}
\end{center} 
\end{table}

\subsection*{gloox}
Gloox je stabilní Jabber/XMPP knihovna vydávána pod licencí GNU GPL. Je urèena pro vývoj klienta a komponent. Jeliko¾ je psána v ANSCI C++ mezi podporované platformy patøí Linux, Windows, Mac OS X, Symbian/Nokia S60, FreeBSD a dal¹í systémy podporující ANSI C++ kompilátor.

Pomocí knihovny gloox je psán bot v této práci. Byla vybrána na základì po¾adavku psaní programu v jazyce C/C++ a operaèním systému Linux. V porovnání s jinými knihovnami pro jazyk C nebo C++ disponuje lep¹í podporovou a dokumentací. Gloox plnì podporuje standart XMPP Core \cite{Rfc3920} a z vìt¹í èásti i standard XMPP IM \cite{Rfc3921}. Dodateènì je plnì podporováno kolem 30 XEP standardù napøíklad XEP-0054 vcard-temp a dal¹í.
%\subsection*{iksemel}
%\subsection*{JabberBeans}
%\subsection*{Jabber-Net}
%\subsection*{JabberPy}

\chapter{Data mining}

cite z %intro_dm.pdf,...
co je v thek kappitole 

Anglický filozof Bacon kdysi øekl, ¾e ve znalostech je síla (Knowledge itself is a power.

Na úvod kapitoly jsou definovány základní pojmy, jez zde budou pou¾ívány. Mezi základní patøí data mining neboli èesky.... Definic tohoto výrazu se v odborné literatuøe obìvuje nìkolik. Zde uvedená je kombinací dvou \uv{definic}[...].

\subsection*{Historycký vývoj}
Pojem data mining nebo--li èesky dolování dat se zaèal ve vìdeckých kruzích objevovat poèátkem 90.let 20. století. První zmínka pochází z konferencí vìnovaných umìlé inteligenci (IJCAI'89 \footnote{International Joint Conference on Artificial Intelligence}--mezinárodní konference konaná v Detroitu, AAAI'91 \footnote{Association for the Advancement of Artificial Intelligence} a AAAI'93 -- americké konference v Californii a Washingtonu, D.C). 

Tradièní metoda získání informací z dat je realizována jejich manuální analýzou a interpretací. V praxi napøíklad odvìtví zdravotnictví, vìdì, marketingu (efektivita reklamních kampaní, segmentace zákazníkù) a dal¹í. Pro tato a mnoho dal¹ích disciplín je manuální zpracování pøíli¹ pomalé, drahé a vysoce subjektivní. Na druhou stranu velikost dat dramaticky vzrostla tudí¾ se manuální analýza stává zcela nepraktická. Databáze rychle rostou ve dvou kategorií :
\begin{enumerate}
   \item poèet záznamù nebo--li objektù v databázi
   \item poèet polí nebo--li atributù objektù v databázi
\end{enumerate}

Proces data mining je pouze jedna èást odvìtví nazývané dobývání znalostí z databází nebo--li KDD (dále budeme pou¾ívat ji¾ zkratku KDD) \footnote{Knowledge Discovery in Database} definované ní¾e \ref{KDD}. Vznik disciplíny je dùsledkem nepøeberného mno¾ství automaticky sbíraných dat a potøeba tato data dále vyu¾ívat. Podstatným znakem je správnost reprezentace výsledkù formou u¾ivateli nejbli¾¹í jako je implikace ve tvaru rozhodovacích pravidel, asociaèních pravidel, rozhodovací stromy, shluky podobných dat a dal¹í. Základem KDD je praktická pou¾itelnost metod, oèekává se zji¹tìní nových skuteèností namísto prezentování známých informací.

\newtheorem{definice}{Definice}[section]
\begin{definice}\label{KDD}
  \textnormal {
KDD je chápáno jako interaktivní a iterativní proces tvoøený kroky selekce, pøedzpracováním, transformace, vlastního \uv{dolování} (data--mining viz. \ref{Data Mining}) a interpretace \cite{Berka}.
}
\end{definice}

Grafické znázornìní definice \ref{KDD} je popsáno schématem na obrázku \ref{picFayyad}, který ukazuje èasový harmonogram v KDD. Schéma znázoròuje následnost jednotlivých procesù, které tvoøí KDD. KDD je iterativní proces, skuteènosti nalezené v pøede¹lých èásti zjednodu¹ují a zpøesòují vstupy pro následující fáze. Jakmile jsou získány znalosti, jsou pøedvedeny u¾ivateli. Pro pøesnost mù¾e být èást procesu KDD je¹tì upøesnìna, a tím získány \uv{pøesnìj¹í a vhodnìj¹í} výsledky.

\begin{figure}[h]
\begin{center}
\input{datamining}
\caption{Proces dobývání znalostí z databází podle knihy autora Fayyad \cite{Fayyad}.}
 \label{picFayyad}
\end{center}
\end{figure}

Získávání znalostí z databází je proces slo¾en z nìkolika krokù vedoucích od surových dat k nìjaké formì nových poznatkù. Iterativní proces se skládá z následujících krokù:

\begin{itemize}
   \item {
    \begin{description}
      \item[èi¹tìní dat] -- fáze, ve které jsou nepodstatné údaje odstranìny z kolekce.
    \end{description}
   }
   \item {
    \begin{description}
      \item[integrace dat] -- data z více zdrojù,èasto heterogenní, jsou kombinována do spoleèného jediného zdroje.
    \end{description}
   }
   \item {
    \begin{description}
      \item[výbìr dat] -- rozhodování o relevantních datech.
    \end{description}
   }
   \item {
    \begin{description}
      \item[transformace dat] -- také známý jako konsolidace dat. Fáze, ve které jsou vybraná data transformována do formy vhodné pro dolování.
    \end{description}
   }
   \item {
    \begin{description}
      \item[data mining] --  zásadní krok, ve kterém jsou aplikovány vzory na data.
    \end{description}
   }
   \item {
    \begin{description}
      \item[hodnocení modelù] -- vzory dat zastupují získané znalosti.
    \end{description}
   }
   \item {
    \begin{description}
      \item[prezentace znalostí] -- koneèná fáze, zji¹tìné poznatky jsou reprezentovány u¾ivateli. Tento základní krok vyu¾ívá vizualizaèní techniky, které pomáhají u¾ivatelùm porozumìt a správnì interpretovat získané výsledky.
    \end{description}
   }
\end{itemize}

Je bì¾né nìkteré z tìchto krokù kombinovat dohromady. Krok èi¹tìní dat a integrace dat mù¾e být provedena spoleènì, tak jako je uvedeno na obrázku \ref{picFayyad}.

\subsection*{Základní pojmy}
V této podsekci jsou ve struènosti vysvìtleny základní nejdùle¾itìj¹í pojmy, kterých se bude v práci dále vyu¾ívat.

Definic výrazu data mining se v odborné literatuøe nachází nìkolik. Zde uvedená je kombinací dvou \uv{definic}. Za pøedchùdce tohoto oboru se pova¾uje vìdní obor statistika, ze které se postupem èasu vyèlenil.

\begin{definice}\label{Data Mining}
  \textnormal {
Data Mining je proces objevování znalostí, který pou¾ívá rùzné analytické nástroje slou¾ící k odhalení døíve neznámých vztahù a informací z velmi rozsáhlých databází. Výsledkem je predikèní model, který je podkladem pro rozhodování \cite{DM}.
}
\end{definice}

Mezi dal¹í èetnì se vyskytující pojmy v tomto odvìtví patøí napøíklad data, znalosti a informace. Tyto termíny jsou èasto mezi sebou zamìòovány, proto je ní¾e jejich význam striktnì definován.

Jedna z nìkolika existujících definic pojmu data je uvedena v \ref{Data}, která je popisuje z pohledu informaèního. Data èasto nemají sémantiku (význam) a bývají zpracována èistì formálnì.

\begin{definice}\label{Data}
  \textnormal {
Data jsou z hlediska poèítaèového pouze hodnoty rùzných datových typù \cite{IIS}.
}
\end{definice}

Informace definované v \ref{Informace}, jsou zpracovaná data interpretována u¾ivatelem.

\begin{definice}\label{Informace}
  \textnormal {
Informace jsou data, která mají sémantiku (význam) \cite{IIS}.
}
\end{definice}

Znalosti, definované v \ref{Znalosti}, patøí do stejné kategorie jako informace, ale jejich interpretace bývá je¹tì slo¾itìj¹í. Èasto jsou tvoøeny shluky informací proto bývají reprezentovány jako dovozené informace.
\begin{definice}\label{Znalosti}
  \textnormal {
Znalosti jsou informace po jejich zaøazení do souvislostí \cite{IIS}.
}
\end{definice}

\section{Metody dolovaní dat}
Základ metod dolování dat je zalo¾en na statistice, posledních poznatcích z umìlé inteligence èi strojového uèení. Hlavní cíle tìchto netriviálních metod je spoleèný -- snaha zji¹tìné výsledky prezentovat srozumitelnou formou. Pro vìt¹inu pou¾ívaných metod je spoleèná vlastnost pøedpoklad, ¾e objekty popsané pomocí podobných charakteristik patøí do stejné skupiny (uèení na základì podobnosti similarity-based learning).Objekty obsahující atributy, lze pøevést na body v n--rozmìrném prostoru (n -- poèet atributù). Vychází s z pøedstavy podobnosti bodù tvoøící urèité shluky v prostoru

Tyto dva pøíklady nejsou jediné rozdíly v metodách dolování dat. Dal¹í rozdíly spoèívají v:
\begin{itemize}
   \item schopnost reprezentace shlukù (napø. otázka lineární separability)
   \item srozumitelnost nalezených znalostí pro u¾ivatele (symbolické vs. subsymbolické metody)
   \item efektivnost znovupou¾ití nalezených znalostí
   \item vhodnost typù data
   \item a dal¹í ...
\end{itemize}

Problémy, které data mining øe¹í, se rozdìlují do nìkolika skupin. Výèet nìkterých z nich nejèastìj¹ích:

\subsection*{Asociaèní pravidla}
Asociaèní pravidla jsou zalo¾ena na syntaxi IF-THEN. Jejich roz¹íøení se datuje do 90.let 20.století. Pan Agrawal jej pøedstavil v souvislosti s analýzou \uv{nákupního ko¹íku}. 

Pou¾itelnost bude vysvìtlena právì na pøíkladu analýzy nákupního ko¹íku. Podstata pøíkladu je tvoøena zákazníkem a jeho systémem nakupování. Jsou zji¹»ovány produkty, které jsou nakupovány souèasnì. Hledáme nebo--li vytváøíme spoleèné vazby (asociaèní pravidla) mezi výrobky a urèujeme jejich spolehlivost. Na základì tìchto závislostí se upravuje umístìní jednotlivých výrobkù.

Obecnì lze tedy asociaèní pravidla pova¾ovat za konstrukci, která z hodnot jedné transakce odvozuje mo¾nost výskytu závislostí v jiných transakcích. Jsou hledány v¹echny vnitøní závislosti mezi daty.

Z pravidel vytvoøených z dat zji¹»ujeme poèet príkladù splòujících pøedpoklad a kolik závìr pravidla, kolik pøíkladù splòujì obì podmínky a poèet pøíkladù splòující pouze druhou èást pravidla. Podle knihy Berky \cite{Berka} pøevedeme základní my¹lenku asociaèních pravidel IF--THEN do jiné terminilogie:
\begin{figure}[h]
\begin{verbatim}
                             Ant => Suc
\end{verbatim}
\end{figure}

kde \textit{Ant} bývá interpretován jednou z mo¾ností výètu -- pøedpoklad, IF, levá strana pravidla nebo ancedent a \textit{Suc} je chápan jako -- závìr, ELSE, pravá strana pravidla, sukcendent. Nyní jsou uvedeny základní vlastnosti:

\textit{n(Ant $\wedge$ Sus) = \textbf{a}}; \textit{n(Ant $\wedge$ $\neg$Sus) = \textbf{b}}; \textit{n($\neg$Ant $\wedge$ Sus) = \textbf{c}}; \textit{n($\neg$Ant $\wedge$ $\neg$Sus) = \textbf{d}}; \textit{n(Ant) = a+b = \textbf{r}}; \textit{n($\neg$Ant) = c+d = \textbf{s}}; \textit{n(Suc) = a+c = \textbf{k}};  \textit{n($\neg$Suc) = b+d = \textbf{l}};  \textit{n = a+b+c+d};

v¹echna pravidla jsou shrnuta v tabulce \ref{tabAsoc}, z nich¾ jsou dále poèítány rùzné charakteristiky a následnì tak hodnotit zji¹tìné znalosti.

\begin{table}[ht]
\begin{center}
\begin{tabular}{ c  c c c} 
\rowcolor[gray]{0.9}
		& \textbf{Suc} 	& \textbf{$\neg$Suc}	&$\sum$\\
Ant		& a		& b			& r\\
$\neg$Ant	& c		& d			& s\\
$\sum$		& k		& l			& n\\ \hline
\end{tabular}
\caption{Kontingenèní tabulka \cite{Berka}.}
\label{tabAsoc}
\end{center} 
\end{table}

Mezi základní charakteristiky asociaèních pravidel podle Agrewalova patøí \textit{podpora} a \textit{spolehlivost}.


\subsection*{Klasifikace}
Klasifikace bude opìt vysvìtlena na pøíkladu. Obsah databáze nebo dotazníku nám ka¾dého klienta banky zaøadí do rùzných krizových skupin. Na základì tìchto skupin pracuje \uv{credit skóring}, je¾ klientovi poskytne nebo odepøe napøíklad úvìr v bance. Dal¹ím pøíkladem je zdravotnictví. Na základì zdravotního stavu pacienta a pøíznakù je zaøazen do tøíd reprezentující jednotlivé nemoci.

Klasifikace rozdìlí jednotlivé zkoumané elementy (podle hodnot atributù) do vhodných kategorií, které jsou pøedem vytvoøeny navzájem podobnými objekty (tvorba profilù tøídy). Pøi této metodì se upøednostòuje pøesnost pøed jednoduchostí a RYCHLOStí. Je snaha o nalezení obecných závìrù z chování dat. Zdroje Klasifikovaných objektù vìt¹inou tvoøí jednotlivé øádky v databázi. Instance jsou tvoøeny vzorky dat, jejich vlastnosti reprezentují atributy vyjádøené èíselnou hodnotou.

Z matematického pohledu klasifikace pøedstavuje funkci o více promìnných. Atribut instance odpovídá promìnné a funkèní hodnota výstupu

\subsubsection*{Modely}
Základem modelù jsou trénovací data. Pøíklad nìkterých klasifikaèních modelù :
\begin{itemize}
   \item Rozhodovací stromy
   \item Neuronové sítì
   \item Statistické metody
   \item Klasifikaèní pravidla
   \item Vyu¾ití vzdálenosti
   \item a dal¹í.
 \end{itemize}


\subsection*{Predikce}
Predikce patøí mezi velmi známé procesy, které na základì získaných znalostí, pøedpovídají následující vývoj. Chronologicky seøazená data a vývoj jejich hodnot v minulosti tvoøí základ pro urèení hodnot budoucích. Pøedpokládá se, ze data v minulosti budou chovat stejnì nebo aspoò podobnì i v budoucnu. Vyu¾ití naleznou v pøedpovìdi poèasí (z namìøených meteorologických hodnot se urèují budoucí pøedpokládané teploty), pøi vývoji cen na burze a dal¹ích.


\subsection*{shlukování}

\begin{figure}[h]
\begin{center}
\input{statistika}
\caption{Proces dobývání znalostí z databází podle knihy autora Fayyad \cite{Fayyad}.}
 \label{picFayyad}
\end{center}
\end{figure}
e test data set se determine how many purchases klasifikaci.
Clustering (Segmentation) - na clustering to lze dívat jako na automatickou
included both items in each two-item set. Again, a do tzv. clusteru of support is který se co
Algoritmy této metody seskupují podobné objekty minimum level (shluku dat),
required. In Figure 13-15, you can see we have 5 two-item sets with the minimum
nejvíce required.
 ?
r
r
support li¹í od clusteru ostatních. Tyto clustery nejsou p·edem definované a je tak na p·íslu¹-
Items from the two-item sets are now combined ur·form three-item sets. This r
·
ném analytikovi, aby je zkoumal a pokou¹el se najít to cité závislosti. Pokud jsou p·edmetem
process continues until there is either one or zero sets with the minimum support. In
·
zkoumání zákazníci, mluvíme vet¹inou o tzv. segmentaci.
Figure 13-15, no three-item sets have the minimum support required so, in this case,
·
Proces clusteringu je také schopen odhalit nej· astej¹í
c ·
the algorithm does not continue with four-item sets. posloupnosti mezi daty. Proto je casto
Once the sets are created, the algorithm creates  ?
membership rules based nebo
vyu¾íván nap·íklad k mapování chování zákazníku na webových stránkáchon the také k ur-
r
result. The algorithm determined that 16,044 purchases included the British Tank
·
·
cení sledovanosti televizních po·  ?
Commander. Of those purchases, radu v závislosti na jejich vysílacím case. Clustering je
15,232, or 94.9%, also included the German Panzer
také pou¾íván k odhalení for predicting future ci závislostí In the future, when
 ? ·
 ?
Driver. This becomes a rulejakýchkoliv problému associations. a mu¾e tak slou¾it jako vstup
someone puts the British miningu. P·íslu¹né algoritmy k této metode jsou nazývány100,
Tank Commander in their shopping cart, · times out of Cluste-
95
pro ostatní metody data
r
they will also include the Germa



je pak dal¹í typ, který je podobný klasifikaci. V tomto pøípadì ale nejsou pøedem urèené
skupiny, do kterých se data zaøazují, ale cílem je odhalení skupin nebo shlukù dat s podobnými
atributy a interpretace tìchto míst hust¹ího výskytu instancí. Problémy tohoto typu se velice èasto
øe¹í v oblasti marketingu, napøíklad pøi urèování skladby trhu, kdy se identifikují cílové skupiny
zákazníkù a vlastnosti, které danou skupinu charakterizují.


V pøípadì nejbli¾¹ího souseda jsou koncepty (tøídy) reprezentovány svými typickými pøedstaviteli. V procesu klasifikace se pak nový pøíklad zaøadí do tøídy na základì podobnosti (nejmen¹í vzdálenosti k reprezentantovi nìjaké tøídy ? viz obr. 8). Jde tedy o metodu která vychází ze shlukové analýzy. Klíèovým pojmem je koncept podobnosti, resp. vzdálenosti dvou pøíkladù.

 rozdìlení databází, tak¾e záznamy jsou seskupovány podle obdobných charakteristik (komodit, lokalit, objemù prodeje aj.)
\section{shlukování}
Segmentace: Nìkdy se zamìøujeme na dìlení objektù do pøedem neurèených skupin. Zajímá nás, zda existují skupiny zákazníkù, je¾ jsou nìjakým zpùsobem specifické a odli¹né od ostatních skupin, a sna¾íme se tyto skupiny urèit.
\section{Dolovaní znalosti z databází}
\section{Programy}
\chapter{Developer}
%\section{Slepá ulièka}
%Pùvodní návrh práce od stávajícího se odli¹uje v tìchto bodech:
%\begin{enumerate}
%   \item neustále pøipojen ve stavu invisible
%   \item pøijímat zprávy.
%\end{enumerate}
%První bod nemohl být splnìn kvùli nepodporovanému stavu invisible. Neexistuje ¾ádná schválená ani rozpracovaná verze XEPu, která by ukazovala jak stavu neviditelnosti dosáhnout.
%Druhý bod pùvodního návrh ztroskotal na neschopnosti Jabber klientù a serverù pracovat korektnì s prioritou. V XEP-XXXX se pouze doporuèuje nastavení stejné hodnoty priority do v¹ech resource. Tato vlastnost by mìla poskytnout mo¾nost rozesílat zpráva v¹em zdrojùm daného úètu se stejnou prioritou. Samozøejmì by nesmìl mít ¾ádný jiný zdroj priority vy¹¹í.
\section{Databáze}
\subsection*{PostgreSQL}
\subsection*{Návrh databáze}
\begin{figure}[hb]
\begin{center}
\input{database}
\caption{Struktura databáze}
 \label{pic1}
\end{center}
\end{figure}
\section{Bot}
\subsection*{Návrh bota}
\section{Knihovny, jazyk}
\section{Jiné produkty}

\chapter{Závìr}
%\cite{Schroter, Ejabberd, Openfire, Jabberd2, Jabberd14, Prosody, Tigase, Xep0060, Xep0163}
%=========================================================================
